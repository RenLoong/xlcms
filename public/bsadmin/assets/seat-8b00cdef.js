import{_ as U,a as A}from"./create-ads-seat.vue_vue_type_script_setup_true_lang-f0d937be.js";import{d as b,r as x,o as I,a as g,c as v,k as n,l as o,w as d,I as z,J as B,u as r,$ as c,a1 as P,a8 as T,a9 as N,y as L,t as u,p as M,q as l,aa as q,D as F,z as J,a2 as Q,P as j}from"./index-3b328f2a.js";/* empty css                   *//* empty css               *//* empty css                  */import{_ as G}from"./_plugin-vue_export-helper-c27b6911.js";/* empty css                   *//* empty css                     *//* empty css                       *//* empty css                 *//* empty css                        *//* empty css                  */import"./xlcms-el-option.vue_vue_type_script_setup_true_lang-ce304949.js";const S=_=>(T("data-v-53bf5c3b"),_=_(),N(),_),H={class:"bg-white rounded-4 p-4 flex-1 overflow-hidden flex flex-column"},K={class:"flex pb-4"},O=S(()=>n("div",{class:"flex-1"},null,-1)),W={class:"flex-1 flex flex-warp seat-list p-10"},X={class:"m-6 shadow bg-hover hover-bg-white rounded-4 seat-list-item p-4 flex flex-column"},Y={class:"h10 flex flex-y-center"},Z={class:"text-danger mr-4"},ee={class:"flex-1"},te={class:"h1 font-weight-600 flex-1 flex flex-center"},se=["onClick"],oe=S(()=>n("span",{class:"h10 pb-2 text-grey pl-2"},"个广告",-1)),ae={class:"h10 flex flex-y-center"},ne={class:"font-weight-600 flex-1"},ce=b({name:"/ads/seat"}),le=b({...ce,setup(_){const m=x(),C=x(),h=x([]),f=()=>{c.get("ads/seat/Query").then(e=>{h.value=[],e.code===c.ResponseCode.SUCCESS&&(h.value=e.data)})},y=()=>{c.get("ads/seat/Cache").then(e=>{e.code===c.ResponseCode.SUCCESS?l.success(e.message):l.info(e.message)}).catch(e=>{l.error(e.message)})},k=e=>{var t;return((t=q.find(s=>s.alias===e))==null?void 0:t.title)||""},w=e=>{const t=e.state?0:1;c.post("ads/seat/SetState",{id:e.id}).then(s=>{if(s.code===c.ResponseCode.SUCCESS)l.success(s.message);else throw new Error(s.message)}).catch(s=>{l.error(s.message),F(()=>{e.state=t})})},E=e=>{c.post("ads/seat/Delete",{id:e.id}).then(t=>{t&&(t.code===c.ResponseCode.SUCCESS?(l.success(t.message),f()):l.info(t.message))}).catch(t=>{l.error(t.message)})};return I(()=>{f()}),(e,t)=>{const s=J,p=P,$=Q,R=j,D=U,V=A;return g(),v("div",H,[n("div",K,[o(p,{effect:"dark",content:"刷新缓存",placement:"bottom-end"},{default:d(()=>[o(s,{type:"warning",icon:"Refresh",onClick:y})]),_:1}),o(p,{effect:"dark",content:"创建广告位",placement:"bottom-end"},{default:d(()=>[o(s,{type:"primary",icon:"Plus",onClick:t[0]||(t[0]=a=>r(m).open())},{default:d(()=>[L("创建广告位")]),_:1})]),_:1}),O]),n("div",W,[(g(!0),v(z,null,B(r(h),a=>(g(),v("div",X,[n("div",Y,[n("div",Z,u(a.title),1),n("div",ee,u(k(a.alias)),1),o($,{modelValue:a.state,"onUpdate:modelValue":i=>a.state=i,"active-value":1,"inactive-value":0,style:{"--el-switch-on-color":"var(--el-color-success)"},onChange:i=>w(a)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),n("div",te,[n("div",{class:"flex flex-y-flex-end pointer",onClick:i=>r(M).push("/ads/list?seat="+a.id)},[n("span",null,u(a.ads_num),1),oe],8,se)]),n("div",ae,[n("div",ne,u(a.seat),1),o(p,{effect:"dark",content:"添加广告",placement:"bottom",enterable:!1},{default:d(()=>[o(s,{type:"success",bg:"",text:"",icon:"Plus",size:"small",onClick:i=>r(C).open({pid:a.id})},null,8,["onClick"])]),_:2},1024),o(p,{effect:"dark",content:"编辑",placement:"bottom",enterable:!1},{default:d(()=>[o(s,{type:"primary",bg:"",text:"",icon:"Edit",size:"small",onClick:i=>r(m).open(a)},null,8,["onClick"])]),_:2},1024),o(R,{icon:"Delete","icon-color":"var(--el-color-danger)",title:"确定继续删除该数据及子数据吗？",width:"200px","confirm-button-text":"继续删除","confirm-button-type":"danger",onConfirm:i=>E(a)},{reference:d(()=>[o(s,{type:"danger",bg:"",text:"",icon:"Delete",size:"small"})]),_:2},1032,["onConfirm"])])]))),256))]),o(D,{ref_key:"createAdsSeatRef",ref:m,onSuccess:f},null,512),o(V,{ref_key:"createAdsRef",ref:C,onSuccess:f},null,512)])}}});const be=G(le,[["__scopeId","data-v-53bf5c3b"]]);export{be as default};
