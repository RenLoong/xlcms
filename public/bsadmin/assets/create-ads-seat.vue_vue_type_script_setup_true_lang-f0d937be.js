import{d as M,r as x,h as P,j as te,a as g,A as C,w as o,k as i,l as e,y as E,u as l,K as z,B as L,$ as b,q as c,D as N,ae as O,v as T,s as G,ad as se,F as ne,_ as de,af as J,ag as K,a2 as W,ah as re,E as H,z as Q,G as X,c as q,I as ue,J as ie,aa as pe,ai as me}from"./index-3b328f2a.js";/* empty css                   *//* empty css                  *//* empty css                     *//* empty css                       *//* empty css                 *//* empty css               *//* empty css                        *//* empty css                  */import{_ as ce}from"./xlcms-el-option.vue_vue_type_script_setup_true_lang-ce304949.js";const _e={class:"pr-10 vh-50 overflow-y-auto"},fe={class:"flex flex-center w-100"},ve=i("div",{class:"px-4"},"-",-1),Ve=i("div",{class:"text-grey h10 line-height-2 pt-2"},[i("div",null,"宽高并非每个位置支持，由开发者定义，可通过广告位标识获取该位置下的广告"),i("div",null,"无单位默认为px，单位：vh,vw,px,rem,em,%")],-1),ge={class:"flex flex-center w-100"},he=i("div",{class:"px-4"},"-",-1),be={class:"dialog-footer flex"},xe=i("div",{class:"flex-1"},null,-1),Pe=M({__name:"create-ads",emits:["success"],setup(Z,{expose:$,emit:S}){const v=x(),R=P({pid:[{required:!0,message:"请选择广告位",trigger:"change"}],path:[{required:!0,message:"请上传图片",trigger:"change"}]}),m=x(!1),s=x([]),a=x({title:"",w:"",h:"",path:"",path_url:"",url:"",action:"",alias_id:"",sort:99,ads_icon:0,state:1,start_time:"",end_time:""}),F=()=>{b.get("ads/seat").then(d=>{d.code===b.ResponseCode.SUCCESS&&(s.value=d.data)}).catch(d=>{c.error(d.message)})},w=d=>{f(),a.value.id=void 0,a.value.pid=void 0,a.value.path_url="",d()},I=()=>{v.value.validate((d,t)=>{if(d){let h="ads/list/Add";a.value.id&&(h="ads/list/Edit"),b.post(h,a.value).then(_=>{_.code===b.ResponseCode.SUCCESS?(c.success(_.message),w(()=>{m.value=!1}),S("success")):c.info(_.message)}).catch(_=>{c.error(_.message)})}else c.warning("请完善表单")})},f=()=>{v.value&&v.value.resetFields()},n=d=>{if(["image/jpeg","image/png","image/jpg"].includes(d.type)){if(d.size/1024/1024>2)return c.error("请选择2MB以内的图片!"),!1}else return c.error("请选择图片"),!1;return!0},y=d=>{if(d.code===b.ResponseCode.SUCCESS){const t=d.data;t.action==="ads/image"&&(a.value.path=t.path,a.value.path_url=t.url)}else c.error(d.message)};return $({open:d=>{F(),m.value=!0,d&&N(()=>{a.value=Object.assign(a.value,d)})}}),(d,t)=>{const h=ce,_=O,p=T,U=G,k=se,A=te("Picture"),r=ne,ee=de,Y=J,le=K,j=W,B=re,oe=H,D=Q,ae=X;return g(),C(ae,{modelValue:l(m),"onUpdate:modelValue":t[14]||(t[14]=u=>L(m)?m.value=u:null),title:l(a).id?"编辑广告":"添加广告",width:"50%","before-close":w,draggable:"","close-on-click-modal":!1,"close-on-press-escape":!1,class:"form-dialog"},{footer:o(()=>[i("span",be,[e(D,{onClick:t[11]||(t[11]=u=>{w(()=>{m.value=!1})})},{default:o(()=>[E("取消")]),_:1}),xe,e(D,{onClick:t[12]||(t[12]=u=>f())},{default:o(()=>[E("重置")]),_:1}),e(D,{type:"primary",onClick:t[13]||(t[13]=u=>I())},{default:o(()=>[E("提交")]),_:1})])]),default:o(()=>[i("div",_e,[e(oe,{"label-position":"right","label-width":"200px",size:"large",ref_key:"formRef",ref:v,model:l(a),rules:l(R)},{default:o(()=>[e(p,{label:"广告位",prop:"pid"},{default:o(()=>[e(_,{modelValue:l(a).pid,"onUpdate:modelValue":t[0]||(t[0]=u=>l(a).pid=u),placeholder:"选择广告位",class:"flex-1"},{default:o(()=>[e(h,{list:l(s),showicon:!1},null,8,["list"])]),_:1},8,["modelValue"])]),_:1}),e(p,{label:"描述",prop:"title"},{default:o(()=>[e(U,{modelValue:l(a).title,"onUpdate:modelValue":t[1]||(t[1]=u=>l(a).title=u),placeholder:"广告文字描述"},null,8,["modelValue"])]),_:1}),e(p,{label:"图片",prop:"path"},{default:o(()=>[e(ee,{accept:"image/jpeg,image/png,image/jpg",data:{action:"ads/image"},"show-file-list":!1,"on-success":y,"before-upload":n,class:"w-100"},{default:o(()=>[l(a).path_url?(g(),C(k,{key:0,src:l(a).path_url,class:"rounded-4",style:{height:"200px",width:"100%"},fit:"contain"},null,8,["src"])):(g(),C(r,{key:1,class:"bg-hover rounded-4 flex flex-center",style:{height:"200px",width:"100%"},size:"42px",color:"#999999"},{default:o(()=>[e(A)]),_:1}))]),_:1})]),_:1}),e(p,{label:"操作",prop:"action"},{default:o(()=>[e(_,{modelValue:l(a).action,"onUpdate:modelValue":t[2]||(t[2]=u=>l(a).action=u),placeholder:"选择点击操作",class:"flex-1",clearable:""},{default:o(()=>[e(Y,{label:"打开文章页",value:"#ARTICLE#"}),e(Y,{label:"打开自定义链接",value:"#DEFAULR#"})]),_:1},8,["modelValue"])]),_:1}),l(a).action==="#DEFAULR#"?(g(),C(p,{key:0,label:"链接",prop:"url"},{default:o(()=>[e(U,{type:"url",modelValue:l(a).url,"onUpdate:modelValue":t[3]||(t[3]=u=>l(a).url=u),placeholder:"URL链接"},null,8,["modelValue"])]),_:1})):z("",!0),e(p,{label:"排序",prop:"sort"},{default:o(()=>[e(le,{modelValue:l(a).sort,"onUpdate:modelValue":t[4]||(t[4]=u=>l(a).sort=u),min:0,max:99,placeholder:"排序正序",controls:!1},null,8,["modelValue"])]),_:1}),e(p,{label:"宽高"},{default:o(()=>[i("div",fe,[e(p,{prop:"w",class:"flex-1"},{default:o(()=>[e(U,{modelValue:l(a).w,"onUpdate:modelValue":t[5]||(t[5]=u=>l(a).w=u),placeholder:"宽度"},null,8,["modelValue"])]),_:1}),ve,e(p,{prop:"h",class:"flex-1"},{default:o(()=>[e(U,{modelValue:l(a).h,"onUpdate:modelValue":t[6]||(t[6]=u=>l(a).h=u),placeholder:"高度"},null,8,["modelValue"])]),_:1})]),Ve]),_:1}),e(p,{label:"广告图标",prop:"ads_icon"},{default:o(()=>[e(j,{modelValue:l(a).ads_icon,"onUpdate:modelValue":t[7]||(t[7]=u=>l(a).ads_icon=u),"active-value":1,"inactive-value":0,style:{"--el-switch-on-color":"var(--el-color-success)"}},null,8,["modelValue"])]),_:1}),e(p,{label:"状态",prop:"state"},{default:o(()=>[e(j,{modelValue:l(a).state,"onUpdate:modelValue":t[8]||(t[8]=u=>l(a).state=u),"active-value":1,"inactive-value":0,style:{"--el-switch-on-color":"var(--el-color-success)"}},null,8,["modelValue"])]),_:1}),e(p,{label:"时间控制"},{default:o(()=>[i("div",ge,[e(p,{prop:"start_time",class:"flex-1"},{default:o(()=>[e(B,{modelValue:l(a).start_time,"onUpdate:modelValue":t[9]||(t[9]=u=>l(a).start_time=u),style:{"--el-date-editor-width":"100%"},type:"datetime",placeholder:"开始时间","value-format":"YYYY/MM/DD hh:mm:ss"},null,8,["modelValue"])]),_:1}),he,e(p,{prop:"end_time",class:"flex-1"},{default:o(()=>[e(B,{modelValue:l(a).end_time,"onUpdate:modelValue":t[10]||(t[10]=u=>l(a).end_time=u),style:{"--el-date-editor-width":"100%"},class:"w-100",type:"datetime",placeholder:"结束时间","value-format":"YYYY/MM/DD hh:mm:ss"},null,8,["modelValue"])]),_:1})])]),_:1})]),_:1},8,["model","rules"])])]),_:1},8,["modelValue","title"])}}});const we=i("div",{class:"text-grey h10"},"排版并非每个位置支持，由开发者定义",-1),ye=i("div",{class:"text-grey h10"},"可通过广告位标识获取该位置下的广告",-1),Ue={class:"flex flex-center w-100"},Ce=i("div",{class:"px-4"},"-",-1),Ee=i("div",{class:"text-grey h10 line-height-2 pt-2"},[i("div",null,"宽高并非每个位置支持，由开发者定义，可通过广告位标识获取该位置下的广告"),i("div",null,"无单位默认为px，单位：vh,vw,px,rem,em,%")],-1),ke={key:0},$e={class:"dialog-footer flex"},Se=i("div",{class:"flex-1"},null,-1),ze=M({__name:"create-ads-seat",emits:["success"],setup(Z,{expose:$,emit:S}){const v=x(),R=P({alias:[{required:!0,message:"请选择排版",trigger:"change"}],title:[{required:!0,message:"请输入名称",trigger:"blur"}],seat:[{required:!0,message:"请输入广告位标识",trigger:"blur"}]}),m=x(!1),s=x({title:"",seat:"",alias:"",w:"",h:"",interval:3e3,duration:500,autoplay:1,state:1}),a=f=>{w(),s.value.id=void 0,f()},F=()=>{v.value.validate((f,n)=>{if(f){let y="ads/seat/Add";s.value.id&&(y="ads/seat/Edit"),b.post(y,s.value).then(V=>{V.code===b.ResponseCode.SUCCESS?(c.success(V.message),a(()=>{m.value=!1}),S("success")):c.info(V.message)}).catch(V=>{c.error(V.message)})}else c.warning("请完善表单")})},w=()=>{v.value&&v.value.resetFields()};return $({open:f=>{m.value=!0,f&&N(()=>{s.value=Object.assign(s.value,f)})}}),(f,n)=>{const y=J,V=O,d=T,t=G,h=W,_=K,p=me,U=H,k=Q,A=X;return g(),C(A,{modelValue:l(m),"onUpdate:modelValue":n[14]||(n[14]=r=>L(m)?m.value=r:null),title:l(s).id?"编辑广告位":"创建广告位",width:"50%","before-close":a,draggable:"","close-on-click-modal":!1,"close-on-press-escape":!1,class:"form-dialog"},{footer:o(()=>[i("span",$e,[e(k,{onClick:n[11]||(n[11]=r=>{a(()=>{m.value=!1})})},{default:o(()=>[E("取消")]),_:1}),Se,e(k,{onClick:n[12]||(n[12]=r=>w())},{default:o(()=>[E("重置")]),_:1}),e(k,{type:"primary",onClick:n[13]||(n[13]=r=>F())},{default:o(()=>[E("提交")]),_:1})])]),default:o(()=>[e(U,{"label-position":"right","label-width":"200px",size:"large",ref_key:"formRef",ref:v,class:"w-80",model:l(s),rules:l(R)},{default:o(()=>[e(d,{label:"排版",prop:"alias"},{default:o(()=>[e(V,{modelValue:l(s).alias,"onUpdate:modelValue":n[0]||(n[0]=r=>l(s).alias=r),placeholder:"选择广告位排版",class:"w-100"},{default:o(()=>[(g(!0),q(ue,null,ie(l(pe),r=>(g(),C(y,{key:r.alias,label:r.title,value:r.alias},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),we]),_:1}),e(d,{label:"名称",prop:"title"},{default:o(()=>[e(t,{modelValue:l(s).title,"onUpdate:modelValue":n[1]||(n[1]=r=>l(s).title=r),placeholder:"广告位名称"},null,8,["modelValue"])]),_:1}),e(d,{label:"标识",prop:"seat"},{default:o(()=>[e(t,{modelValue:l(s).seat,"onUpdate:modelValue":n[2]||(n[2]=r=>l(s).seat=r),placeholder:"广告位标识"},null,8,["modelValue"]),ye]),_:1}),e(d,{label:"宽高"},{default:o(()=>[i("div",Ue,[e(d,{prop:"w",class:"flex-1"},{default:o(()=>[e(t,{modelValue:l(s).w,"onUpdate:modelValue":n[3]||(n[3]=r=>l(s).w=r),placeholder:"宽度"},null,8,["modelValue"])]),_:1}),Ce,e(d,{prop:"h",class:"flex-1"},{default:o(()=>[e(t,{modelValue:l(s).h,"onUpdate:modelValue":n[4]||(n[4]=r=>l(s).h=r),placeholder:"高度"},null,8,["modelValue"])]),_:1})]),Ee]),_:1}),e(d,{label:"状态",prop:"state"},{default:o(()=>[e(h,{modelValue:l(s).state,"onUpdate:modelValue":n[5]||(n[5]=r=>l(s).state=r),"active-value":1,"inactive-value":0,style:{"--el-switch-on-color":"var(--el-color-success)"}},null,8,["modelValue"])]),_:1}),l(s).alias.includes("SWIPER")?(g(),q("div",ke,[e(d,{label:"切换时间",prop:"interval"},{default:o(()=>[e(_,{modelValue:l(s).interval,"onUpdate:modelValue":n[6]||(n[6]=r=>l(s).interval=r),min:1e3,placeholder:"自动切换时间间隔",controls:!1},null,8,["modelValue"])]),_:1}),e(d,{label:"动画时长",prop:"duration"},{default:o(()=>[e(_,{modelValue:l(s).duration,"onUpdate:modelValue":n[7]||(n[7]=r=>l(s).duration=r),min:100,placeholder:"滑动动画时长",controls:!1},null,8,["modelValue"])]),_:1}),e(d,{label:"指示点颜色",prop:"indicator_color"},{default:o(()=>[e(p,{modelValue:l(s).indicator_color,"onUpdate:modelValue":n[8]||(n[8]=r=>l(s).indicator_color=r),placeholder:"指示点颜色","show-alpha":""},null,8,["modelValue"])]),_:1}),e(d,{label:"选中指示点颜色",prop:"indicator_active_color"},{default:o(()=>[e(p,{modelValue:l(s).indicator_active_color,"onUpdate:modelValue":n[9]||(n[9]=r=>l(s).indicator_active_color=r),placeholder:"当前选中的指示点颜色","show-alpha":""},null,8,["modelValue"])]),_:1}),e(d,{label:"自动切换",prop:"autoplay"},{default:o(()=>[e(h,{modelValue:l(s).autoplay,"onUpdate:modelValue":n[10]||(n[10]=r=>l(s).autoplay=r),"active-value":1,"inactive-value":0,style:{"--el-switch-on-color":"var(--el-color-success)"}},null,8,["modelValue"])]),_:1})])):z("",!0)]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])}}});export{ze as _,Pe as a};
