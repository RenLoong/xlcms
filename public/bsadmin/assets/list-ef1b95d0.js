import{_ as T,a as q}from"./create-ads-seat.vue_vue_type_script_setup_true_lang-f0d937be.js";import{d as E,r as g,o as F,ab as M,a as u,c as C,k as n,l as s,w as l,I as Q,J as j,u as p,$ as r,a1 as J,Q as K,a8 as G,a9 as H,y,t as m,A as S,K as w,ac as O,q as d,aa as W,D as X,p as Y,z as Z,a2 as ee,ad as te,P as se}from"./index-3b328f2a.js";/* empty css                      *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                   *//* empty css                  */import{_ as ae}from"./_plugin-vue_export-helper-c27b6911.js";/* empty css                   *//* empty css                     *//* empty css                       *//* empty css                        */import"./xlcms-el-option.vue_vue_type_script_setup_true_lang-ce304949.js";const k=h=>(G("data-v-fec69997"),h=h(),H(),h),oe={class:"bg-white rounded-4 p-4 flex-1 overflow-hidden flex flex-column"},ne={class:"flex pb-4"},le=k(()=>n("div",{class:"flex-1"},null,-1)),ce={class:"flex-1 flex flex-wrap seat-list p-10 flex-flex-start"},ie={class:"m-6 shadow bg-hover hover-bg-white rounded-4 seat-list-item p-4 flex flex-column"},re={class:"h10 flex flex-y-center"},de={class:"text-danger mr-4"},_e={class:"font-weight-600"},pe=k(()=>n("div",{class:"flex-1"},null,-1)),fe={class:"py-4 flex-1 flex flex-center"},ue={class:"h10 flex flex-y-center"},me={class:"font-weight-600"},he={class:"font-weight-600 text-success px-2"},ge={class:"font-weight-600 text-danger px-2"},ve=k(()=>n("div",{class:"flex-1"},null,-1)),xe={class:"px-4 pt-4"},Ce=E({name:"/ads/list"}),ke=E({...Ce,setup(h){const b=g(),v=g(),x=g([]),_=()=>{r.get("ads/list/Query",{params:c.value}).then(e=>{x.value=[],e.code===r.ResponseCode.SUCCESS&&(c.value.total=e.data.total,c.value.per_page=e.data.per_page,x.value=e.data.data)})},z=()=>{r.get("ads/list/Cache").then(e=>{e.code===r.ResponseCode.SUCCESS?d.success(e.message):d.info(e.message)}).catch(e=>{d.error(e.message)})},R=e=>{var a;return((a=W.find(o=>o.alias===e))==null?void 0:a.title)||""},$=e=>{const a=e.state?0:1;r.post("ads/list/SetState",{id:e.id}).then(o=>{if(o.code===r.ResponseCode.SUCCESS)d.success(o.message);else throw new Error(o.message)}).catch(o=>{d.error(o.message),X(()=>{e.state=a})})},A=e=>{r.post("ads/list/Delete",{id:e.id}).then(a=>{a&&(a.code===r.ResponseCode.SUCCESS?(d.success(a.message),_()):d.info(a.message))}).catch(a=>{d.error(a.message)})},c=g({page:1,per_page:10,total:0,keyword:"",state:"",seat:"",start_time:"",end_time:""}),D=e=>{c.value.per_page=e,_()},V=e=>{c.value.page=e,_()};return F(()=>{_()}),M(()=>{const e=Y.currentRoute.value.query;e.seat&&(c.value.seat=e.seat),_()}),(e,a)=>{const o=Z,i=J,U=ee,I=te,B=se,P=K,L=T,N=q;return u(),C("div",oe,[n("div",ne,[s(i,{effect:"dark",content:"刷新缓存",placement:"bottom-end"},{default:l(()=>[s(o,{type:"warning",icon:"Refresh",onClick:z})]),_:1}),s(i,{effect:"dark",content:"创建广告位",placement:"bottom-end"},{default:l(()=>[s(o,{type:"primary",icon:"Plus",onClick:a[0]||(a[0]=t=>p(b).open())},{default:l(()=>[y("创建广告位")]),_:1})]),_:1}),s(i,{effect:"dark",content:"创建广告位",placement:"bottom-end"},{default:l(()=>[s(o,{type:"success",icon:"Plus",onClick:a[1]||(a[1]=t=>p(v).open())},{default:l(()=>[y("创建广告")]),_:1})]),_:1}),le]),n("div",ce,[(u(!0),C(Q,null,j(p(x),t=>(u(),C("div",ie,[n("div",re,[n("div",de,m(t.title),1),s(i,{effect:"dark",content:"排版",placement:"top",enterable:!1},{default:l(()=>[n("div",_e,m(R(t.seat_alias)),1)]),_:2},1024),pe,s(U,{modelValue:t.state,"onUpdate:modelValue":f=>t.state=f,"active-value":1,"inactive-value":0,style:{"--el-switch-on-color":"var(--el-color-success)"},onChange:f=>$(t)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),n("div",fe,[s(I,{src:t.path_url,class:"rounded-4",style:{height:"200px",width:"100%"},fit:"contain"},null,8,["src"])]),n("div",ue,[n("div",me,m(t.seat),1),t.start_time?(u(),S(i,{key:0,effect:"dark",content:"开始时间",placement:"bottom",enterable:!1},{default:l(()=>[n("div",he,m(t.start_time),1)]),_:2},1024)):w("",!0),t.end_time?(u(),S(i,{key:1,effect:"dark",content:"结束时间",placement:"bottom",enterable:!1},{default:l(()=>[n("div",ge,m(t.end_time),1)]),_:2},1024)):w("",!0),ve,s(i,{effect:"dark",content:"复制链接",placement:"bottom",enterable:!1},{default:l(()=>[s(o,{bg:"",text:"",icon:"Link",size:"small",onClick:f=>p(O)(t.action==="#DEFAULE#"?t.url:t.action)},null,8,["onClick"])]),_:2},1024),s(i,{effect:"dark",content:"编辑",placement:"bottom",enterable:!1},{default:l(()=>[s(o,{type:"primary",bg:"",text:"",icon:"Edit",size:"small",onClick:f=>p(v).open(t)},null,8,["onClick"])]),_:2},1024),s(B,{icon:"Delete","icon-color":"var(--el-color-danger)",title:"确定继续删除该数据及子数据吗？",width:"200px","confirm-button-text":"继续删除","confirm-button-type":"danger",onConfirm:f=>A(t)},{reference:l(()=>[s(o,{type:"danger",bg:"",text:"",icon:"Delete",size:"small"})]),_:2},1032,["onConfirm"])])]))),256))]),n("div",xe,[s(P,{"page-sizes":[10,20,50,100],"page-size":p(c).per_page,background:"",layout:"total, sizes, prev, pager, next, jumper",total:p(c).total,onSizeChange:D,onCurrentChange:V},null,8,["page-size","total"])]),s(L,{ref_key:"createAdsSeatRef",ref:b,onSuccess:_},null,512),s(N,{ref_key:"createAdsRef",ref:v,onSuccess:_},null,512)])}}});const Pe=ae(ke,[["__scopeId","data-v-fec69997"]]);export{Pe as default};
